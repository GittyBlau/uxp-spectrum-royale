/**
 * Generated by Apache Royale Compiler from com/unhurdle/spectrum/RangeSlider.as
 * com.unhurdle.spectrum.RangeSlider
 *
 * @fileoverview
 *
 * @suppress {missingRequire|checkTypes|accessControls}
 */

goog.provide('com.unhurdle.spectrum.RangeSlider');
/* Royale Dependency List: com.unhurdle.spectrum.newElement,org.apache.royale.core.WrappedHTMLElement,org.apache.royale.events.MouseEvent,org.apache.royale.geom.Point,org.apache.royale.utils.PointUtils,org.apache.royale.utils.number.getPercent,org.apache.royale.utils.number.pinValue,org.apache.royale.utils.Language*/

goog.require('com.unhurdle.spectrum.SliderBase');



/**
 * @constructor
 * @extends {com.unhurdle.spectrum.SliderBase}
 */
com.unhurdle.spectrum.RangeSlider = function() {
  com.unhurdle.spectrum.RangeSlider.base(this, 'constructor');
  this.typeNames = this.getSelector() + " " + this.valueToSelector("range");
};
goog.inherits(com.unhurdle.spectrum.RangeSlider, com.unhurdle.spectrum.SliderBase);


/**
 * @protected
 * @override
 */
com.unhurdle.spectrum.RangeSlider.prototype.getSelector = function() {
  return "spectrum-Slider";
};


/**
 * @private
 * @type {HTMLElement}
 */
com.unhurdle.spectrum.RangeSlider.prototype.com_unhurdle_spectrum_RangeSlider_leftHandle = null;


/**
 * @private
 * @type {HTMLElement}
 */
com.unhurdle.spectrum.RangeSlider.prototype.com_unhurdle_spectrum_RangeSlider_rightHandle = null;


/**
 * @private
 * @type {HTMLElement}
 */
com.unhurdle.spectrum.RangeSlider.prototype.com_unhurdle_spectrum_RangeSlider_leftTrack = null;


/**
 * @private
 * @type {HTMLElement}
 */
com.unhurdle.spectrum.RangeSlider.prototype.com_unhurdle_spectrum_RangeSlider_rightTrack = null;


/**
 * @private
 * @type {HTMLElement}
 */
com.unhurdle.spectrum.RangeSlider.prototype.com_unhurdle_spectrum_RangeSlider_middleTrack = null;


/**
 * @private
 * @type {HTMLInputElement}
 */
com.unhurdle.spectrum.RangeSlider.prototype.com_unhurdle_spectrum_RangeSlider_secondInput = null;


/**
 * @protected
 * @override
 */
com.unhurdle.spectrum.RangeSlider.prototype.enableDisableInput = function(value) {
  this.input.disabled = value;
  this.com_unhurdle_spectrum_RangeSlider_secondInput.disabled = value;
};


/**
 * @protected
 * @override
 */
com.unhurdle.spectrum.RangeSlider.prototype.createElement = function() {
  var /** @type {org.apache.royale.core.WrappedHTMLElement} */ elem = com.unhurdle.spectrum.RangeSlider.superClass_.createElement.apply(this);
  elem.setAttribute("role", "group");
  this.controlsContainer = com.unhurdle.spectrum.newElement("div", this.appendSelector("-controls"));
  this.controlsContainer.setAttribute("role", "presentation");
  this.com_unhurdle_spectrum_RangeSlider_leftTrack = com.unhurdle.spectrum.newElement("div", "spectrum-Slider-track");
  this.com_unhurdle_spectrum_RangeSlider_leftTrack.style.width = "20%";
  this.controlsContainer.appendChild(this.com_unhurdle_spectrum_RangeSlider_leftTrack);
  this.com_unhurdle_spectrum_RangeSlider_leftHandle = com.unhurdle.spectrum.newElement("div", "spectrum-Slider-handle");
  this.com_unhurdle_spectrum_RangeSlider_leftHandle.setAttribute("role", "presentation");
  this.com_unhurdle_spectrum_RangeSlider_leftHandle.style.left = "20%";
  this.input = com.unhurdle.spectrum.newElement("input", "spectrum-Slider-input");
  this.input.type = "range";
  this.input.step = "2";
  this.max = 100;
  this.com_unhurdle_spectrum_RangeSlider_leftHandle.appendChild(this.input);
  this.controlsContainer.appendChild(this.com_unhurdle_spectrum_RangeSlider_leftHandle);
  this.com_unhurdle_spectrum_RangeSlider_middleTrack = com.unhurdle.spectrum.newElement("div", "spectrum-Slider-track");
  this.com_unhurdle_spectrum_RangeSlider_middleTrack.style.left = "20%";
  this.com_unhurdle_spectrum_RangeSlider_middleTrack.style.right = "40%";
  this.controlsContainer.appendChild(this.com_unhurdle_spectrum_RangeSlider_middleTrack);
  this.com_unhurdle_spectrum_RangeSlider_rightHandle = com.unhurdle.spectrum.newElement("div", "spectrum-Slider-handle");
  this.com_unhurdle_spectrum_RangeSlider_rightHandle.setAttribute("role", "presentation");
  this.com_unhurdle_spectrum_RangeSlider_rightHandle.style.left = "60%";
  this.com_unhurdle_spectrum_RangeSlider_secondInput = com.unhurdle.spectrum.newElement("input", "spectrum-Slider-input");
  this.com_unhurdle_spectrum_RangeSlider_secondInput.type = "range";
  this.com_unhurdle_spectrum_RangeSlider_secondInput.step = "2";
  this.secondMax = 100;
  this.com_unhurdle_spectrum_RangeSlider_rightHandle.appendChild(this.com_unhurdle_spectrum_RangeSlider_secondInput);
  this.controlsContainer.appendChild(this.com_unhurdle_spectrum_RangeSlider_rightHandle);
  this.com_unhurdle_spectrum_RangeSlider_rightTrack = com.unhurdle.spectrum.newElement("div", "spectrum-Slider-track");
  this.com_unhurdle_spectrum_RangeSlider_rightTrack.style.width = "40%";
  this.controlsContainer.appendChild(this.com_unhurdle_spectrum_RangeSlider_rightTrack);
  elem.appendChild(this.controlsContainer);
  this.element.addEventListener('mousedown', org.apache.royale.utils.Language.closure(this.onMouseDown, this, 'onMouseDown'));
  return elem;
};


/**
 * @override
 */
com.unhurdle.spectrum.RangeSlider.prototype.addedToParent = function() {
  com.unhurdle.spectrum.RangeSlider.superClass_.addedToParent.apply(this);
  this.positionElements();
};


/**
 * @protected
 * @override
 */
com.unhurdle.spectrum.RangeSlider.prototype.getValue = function() {
  var /** @type {number} */ startPercent = parseFloat(this.com_unhurdle_spectrum_RangeSlider_leftHandle.style.left);
  var /** @type {number} */ endPercent = parseFloat(this.com_unhurdle_spectrum_RangeSlider_rightHandle.style.left);
  return "" + startPercent + " - " + endPercent;
};


/**
 * @protected
 * @override
 */
com.unhurdle.spectrum.RangeSlider.prototype.positionElements = function() {
  var /** @type {number} */ startPercent = parseFloat(this.com_unhurdle_spectrum_RangeSlider_leftHandle.style.left);
  var /** @type {number} */ endPercent = parseFloat(this.com_unhurdle_spectrum_RangeSlider_rightHandle.style.left);
  this.com_unhurdle_spectrum_RangeSlider_leftTrack.style.width = startPercent + '%';
  this.com_unhurdle_spectrum_RangeSlider_middleTrack.style.left = startPercent + '%';
  this.com_unhurdle_spectrum_RangeSlider_middleTrack.style.right = (100 - endPercent) + '%';
  this.com_unhurdle_spectrum_RangeSlider_rightTrack.style.width = (100 - endPercent) + '%';
};


/**
 * @protected
 * @override
 */
com.unhurdle.spectrum.RangeSlider.prototype.onMouseDown = function(e) {
  com.unhurdle.spectrum.RangeSlider.superClass_.onMouseDown.apply(this, [ e] );
  this.handle = e.target;
};


/**
 * @protected
 * @override
 */
com.unhurdle.spectrum.RangeSlider.prototype.onMouseUp = function() {
  com.unhurdle.spectrum.RangeSlider.superClass_.onMouseUp.apply(this);
  this.handle = null;
};


/**
 * @protected
 * @override
 */
com.unhurdle.spectrum.RangeSlider.prototype.onMouseMove = function(e) {
  if (this.disabled) {
    return;
  }
  var /** @type {number} */ sliderOffsetWidth = this.element.offsetWidth;
  var /** @type {number} */ localX = org.apache.royale.utils.PointUtils.globalToLocal(new org.apache.royale.geom.Point(e.clientX, e.clientY), this).x;
  var /** @type {number} */ x = org.apache.royale.utils.number.pinValue(localX, 0, sliderOffsetWidth);
  var /** @type {number} */ percent = org.apache.royale.utils.number.getPercent(x, sliderOffsetWidth);
  if (this.handle === this.com_unhurdle_spectrum_RangeSlider_leftHandle) {
    if (percent < parseFloat(this.com_unhurdle_spectrum_RangeSlider_rightHandle.style.left) - 2) {
      this.handle.style.left = percent + '%';
      this.com_unhurdle_spectrum_RangeSlider_leftTrack.style.width = percent + '%';
    }
  } else if (this.handle === this.com_unhurdle_spectrum_RangeSlider_rightHandle) {
    if (percent > parseFloat(this.com_unhurdle_spectrum_RangeSlider_leftHandle.style.left) + 2) {
      this.handle.style.left = percent + '%';
      this.com_unhurdle_spectrum_RangeSlider_rightTrack.style.width = (100 - percent) + '%';
    }
  }
  this.com_unhurdle_spectrum_RangeSlider_middleTrack.style.left = this.com_unhurdle_spectrum_RangeSlider_leftHandle.style.left;
  this.com_unhurdle_spectrum_RangeSlider_middleTrack.style.right = (100 - parseFloat(this.com_unhurdle_spectrum_RangeSlider_rightHandle.style.left)) + '%';
  this.input.value = this.com_unhurdle_spectrum_RangeSlider_middleTrack.style.left;
  this.com_unhurdle_spectrum_RangeSlider_secondInput.value = this.com_unhurdle_spectrum_RangeSlider_middleTrack.style.right;
  if (this.parent) {
    this.positionElements();
  }
  if (this.valueNode) {
    this.valueNode.text = this.getValue();
  }
};


/**
 * @nocollapse
 * @export
 * @type {number}
 */
com.unhurdle.spectrum.RangeSlider.prototype.secondStep;


com.unhurdle.spectrum.RangeSlider.prototype.get__secondStep = function() {
  return Number(this.com_unhurdle_spectrum_RangeSlider_secondInput.step);
};


com.unhurdle.spectrum.RangeSlider.prototype.set__secondStep = function(value) {
  this.com_unhurdle_spectrum_RangeSlider_secondInput.step = "" + value;
};


/**
 * @nocollapse
 * @export
 * @type {number}
 */
com.unhurdle.spectrum.RangeSlider.prototype.secondMin;


com.unhurdle.spectrum.RangeSlider.prototype.get__secondMin = function() {
  return Number(this.com_unhurdle_spectrum_RangeSlider_secondInput.min);
};


com.unhurdle.spectrum.RangeSlider.prototype.set__secondMin = function(value) {
  this.com_unhurdle_spectrum_RangeSlider_secondInput.min = "" + value;
};


/**
 * @nocollapse
 * @export
 * @type {number}
 */
com.unhurdle.spectrum.RangeSlider.prototype.secondMax;


com.unhurdle.spectrum.RangeSlider.prototype.get__secondMax = function() {
  return Number(this.com_unhurdle_spectrum_RangeSlider_secondInput.max);
};


com.unhurdle.spectrum.RangeSlider.prototype.set__secondMax = function(value) {
  this.com_unhurdle_spectrum_RangeSlider_secondInput.max = "" + value;
};


Object.defineProperties(com.unhurdle.spectrum.RangeSlider.prototype, /** @lends {com.unhurdle.spectrum.RangeSlider.prototype} */ {
/**
 * @type {number}
 */
secondStep: {
get: com.unhurdle.spectrum.RangeSlider.prototype.get__secondStep,
set: com.unhurdle.spectrum.RangeSlider.prototype.set__secondStep},
/**
 * @type {number}
 */
secondMin: {
get: com.unhurdle.spectrum.RangeSlider.prototype.get__secondMin,
set: com.unhurdle.spectrum.RangeSlider.prototype.set__secondMin},
/**
 * @type {number}
 */
secondMax: {
get: com.unhurdle.spectrum.RangeSlider.prototype.get__secondMax,
set: com.unhurdle.spectrum.RangeSlider.prototype.set__secondMax}}
);


/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */
com.unhurdle.spectrum.RangeSlider.prototype.ROYALE_CLASS_INFO = { names: [{ name: 'RangeSlider', qName: 'com.unhurdle.spectrum.RangeSlider', kind: 'class' }] };



/**
 * Reflection
 *
 * @return {Object.<string, Function>}
 */
com.unhurdle.spectrum.RangeSlider.prototype.ROYALE_REFLECTION_INFO = function () {
  return {
    accessors: function () {
      return {
        'secondStep': { type: 'Number', access: 'readwrite', declaredBy: 'com.unhurdle.spectrum.RangeSlider'},
        'secondMin': { type: 'Number', access: 'readwrite', declaredBy: 'com.unhurdle.spectrum.RangeSlider'},
        'secondMax': { type: 'Number', access: 'readwrite', declaredBy: 'com.unhurdle.spectrum.RangeSlider'}
      };
    },
    methods: function () {
      return {
        'RangeSlider': { type: '', declaredBy: 'com.unhurdle.spectrum.RangeSlider'},
        'addedToParent': { type: 'void', declaredBy: 'com.unhurdle.spectrum.RangeSlider'}
      };
    }
  };
};
/**
 * @const
 * @type {number}
 */
com.unhurdle.spectrum.RangeSlider.prototype.ROYALE_COMPILE_FLAGS = 11;
